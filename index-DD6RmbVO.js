"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./index-fMyz1k60.js"),l=require("./is-plan-event-enabled-DF66Renz.js");function c(r,u){var i,n;if(!r||!Object.keys(r))return{};var s=r.integrations?Object.keys(r.integrations).filter(function(e){return r.integrations[e]===!1}):[],o=[];return((i=u.remotePlugins)!==null&&i!==void 0?i:[]).forEach(function(e){s.forEach(function(t){e.creationName==t&&o.push(e.name)})}),((n=u.remotePlugins)!==null&&n!==void 0?n:[]).reduce(function(e,t){return t.settings.subscriptions&&o.includes(t.name)&&t.settings.subscriptions.forEach(function(f){return e["".concat(t.name," ").concat(f.partnerAction)]=!1}),e},{})}function d(r,u){function i(n){var s=r,o=n.event.event;if(s&&o){var e=s[o];if(l.isPlanEventEnabled(s,e)){var t=c(e,u);n.updateEvent("integrations",a.__assign(a.__assign(a.__assign({},n.event.integrations),e==null?void 0:e.integrations),t))}else return n.updateEvent("integrations",a.__assign(a.__assign({},n.event.integrations),{All:!1,"Segment.io":!0})),n}return n}return{name:"Schema Filter",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:i,alias:i,track:i,identify:i,group:i}}exports.schemaFilter=d;
