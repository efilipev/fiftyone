"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("./index-fMyz1k60.js");function c(e,i){return Object.keys(i).reduce(function(a,t){if(t.startsWith(e)){var r=t.substr(e.length);a[r]=i[t]}return a},{})}function O(e,i){var a=document.createElement("a");a.href=i;var t=a.search.slice(1),r=t.split("&").reduce(function(o,S){var j=S.split("="),b=j[0],q=j[1];return o[b]=f.gracefulDecodeURIComponent(q),o},{}),s=[],p=r.ajs_uid,l=r.ajs_event,y=r.ajs_aid,n=f.isPlainObject(e.options.useQueryString)?e.options.useQueryString:{},u=n.aid,g=u===void 0?/.+/:u,d=n.uid,m=d===void 0?/.+/:d;if(y){var _=Array.isArray(r.ajs_aid)?r.ajs_aid[0]:r.ajs_aid;g.test(_)&&e.setAnonymousId(_)}if(p){var v=Array.isArray(r.ajs_uid)?r.ajs_uid[0]:r.ajs_uid;if(m.test(v)){var A=c("ajs_trait_",r);s.push(e.identify(v,A))}}if(l){var h=Array.isArray(r.ajs_event)?r.ajs_event[0]:r.ajs_event,P=c("ajs_prop_",r);s.push(e.track(h,P))}return Promise.all(s)}exports.queryString=O;
